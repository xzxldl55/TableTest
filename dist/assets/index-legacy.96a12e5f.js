!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r=document.createElement("style");r.innerHTML='.left{text-align:left}.right{text-align:right}.center{text-align:center}.mr-1{margin-right:1rem}table{table-layout:fixed;border:1px solid #d7dde4;font-size:1rem;width:100%;border-radius:4px;box-sizing:border-box;color:#657180}table>thead{background:#f5f7f9;color:#657180}table>tbody{display:inline-block;width:100%;overflow:auto}tr{display:flex;width:100%}th,td{display:inline-block;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:8px 12px;text-align:center}.table-search-container{line-height:32px;padding:4px 0}.table-search-container .table-search-select{line-height:32px;height:32px;width:80px;border:1px solid #dcdfe6;padding:0 16px 0 8px;box-sizing:border-box;color:#606266}.table-search-container .table-search-input{height:32px;box-sizing:border-box;border:1px solid #dcdfe6;border-left-color:transparent;color:#606266;outline:none;transition:.5s}.table-search-container .table-search-input:hover,.table-search-input:focus{border:1px solid #39f}.column-sort{position:relative;display:inline-block;margin-left:5px;cursor:pointer}.column-sort:before{position:absolute;top:-5px;content:"";border:5px solid transparent;border-top-color:#657180}.column-sort:after{position:absolute;top:-18px;content:"";border:5px solid transparent;border-bottom-color:#657180}.column-sort.asc:before{border-top-color:#39f}.column-sort.des:after{border-bottom-color:#39f}.pagination{padding:8px 16px;border-top:1px solid #e3e8ee}.pagination-btn{display:inline-block;width:32px;height:32px;text-align:center;line-height:32px;background-color:#fff;color:#657180;border:1px solid #d7dde4;margin-right:8px;border-radius:4px;cursor:pointer;transition:.5s}.pagination-btn:last-child{margin-right:0}.pagination-btn:hover{border-color:#39f;color:#39f}.pagination-btn.page-on{background:#39f;color:#fff;border-color:transparent}.table_demo[data-v-4aa9decf]{width:80%;margin:50px auto}\n',document.head.appendChild(r),System.register(["./vendor-legacy.66c0c1b5.js"],(function(){"use strict";var t,n,r,a,o,i,l,c,u,s,d,f,p;return{setters:[function(e){t=e.d,n=e.c,r=e.a,a=e.b,o=e.r,i=e.w,l=e.s,c=e.i,u=e.e,s=e.f,d=e.V,f=e.C,p=e.g}],execute:function(){var m={data:{type:Array,required:!0},columns:{type:Array,required:!0},showHeader:{type:Boolean,default:!0},pagination:{type:Object,default:function(){}},maxHeight:{type:Number||String,default:-1},filters:{type:Array,default:function(){return[]}}},g={name:{type:String,required:!0},title:{type:String,default:""},canSort:{type:Boolean,default:!1},renderFn:{type:Function||void 0,default:void 0},sortState:{type:Object,default:function(){return{name:"",direction:0}}}},b=t({name:"TableColumn",props:g,setup:function(e,t){var n=t.emit,a=e.title,o=e.name,i=e.canSort,l=h(e.sortState,o),c=function(){n("click",o)};return function(){return r("th",{attrs:{"column-name":o}},[a,i?r("span",{class:l.value,on:{click:c}}):""])}}}),h=function(e,t){return n((function(){return{"column-sort":!0,des:e.name===t&&!e.direction,asc:e.name===t&&e.direction}}))},v=a("table:sort"),x=a("table:filter"),y=a("table:pagination"),S=a("table:body"),w=a("table:error"),_=t({name:"Table",props:m,setup:function(t,a){var u=a.slots;!function(e){var t,n,r=null==e||null===(t=e.columns)||void 0===t?void 0:t.map((function(e){return e.name}));if(r.length!==new Set(r).size){var a="Column name can not the same";throw w(a),Error(a)}if(c(r,e.filters).length!==(null===(n=e.filters)||void 0===n?void 0:n.length)){var o="filters must be a column name";throw w(o),Error(o)}}(t);var s=o({data:t.data,columns:t.columns,filters:t.filters,showHeader:t.showHeader}),d=function(e){return n((function(){return{maxHeight:"string"==typeof e.maxHeight?e.maxHeight:e.maxHeight+"px"}}))}(t),f=function(){var e=o({name:"",direction:1});return[e,{handleSort:function(t){e.name!==t?(e.name=t,e.direction=1):e.name==t&&0===e.direction?e.name="":e.direction=Number(!e.direction),v("sort by",t,e.direction?" 升序":" 降序")}}]}(),p=e(f,2),m=p[0],g=p[1].handleSort,h=function(e,t){var r=e?o({pageIndex:e.pageIndex,pageSize:e.pageSize,count:t}):void 0,a=n((function(){return r?Math.ceil(r.count/r.pageSize):0}));return i(a,(function(){r.pageIndex=Math.min(a.value,r.pageIndex)})),[r,{pageBtnSize:a,changePage:function(e){r.pageIndex=e,y("change page to",e)},goBefore:function(){var e=r.pageIndex-1;r.pageIndex=e<=0?1:e,y("go before")},goNext:function(){var e=r.pageIndex+1;r.pageIndex=e>a.value?a.value:e,y("go next")},setPageCount:function(e){r.count=e}}]}(t.pagination,s.data.length),_=e(h,2),C=_[0],I=_[1],k=I.pageBtnSize,z=I.changePage,A=I.goBefore,T=I.goNext,E=I.setPageCount,F=function(e){var t=o({filter:e,searchValue:""});return[t,{search:function(e,n){t.filter=e,t.searchValue=n,x("filter data, filter is ".concat(t.filter," searchValue is ").concat(t.searchValue))}}]}(n((function(){var e;return null!==(e=t.filters)&&void 0!==e&&e.length?t.filters[0]:""})).value),H=e(F,2),j=H[0],P=H[1].search,V=function(e,t,r,a,o){var i=n((function(){var n=e.data||[],i=r.filter,c=r.searchValue;if(i&&c){var u=e.columns.filter((function(e){return e.name===i}))[0].renderFn;n=n.filter((function(e){return(u?u(e[i]):e[i]).toString().toLocaleLowerCase().includes(c.toLocaleLowerCase())}))}if(!n||!a)return n;o(n.length);var s=(a.pageIndex-1)*a.pageSize,d=s+a.pageSize;return t.name?t.direction?l(n,(function(e){return e[t.name]})).slice(s,d):l(n,(function(e){return e[t.name]})).reverse().slice(s,d):n.slice(s,d)}));return i}(s,m,j,C,E);return i(V,(function(){S("data change")})),function(){var e=function(e,t,n){var a=function(e){var r=e.target;"Enter"===e.code&&n(t.filter,r.value)},o=function(e){var t=e.target;n(t.value,"")};return r("header",[e.length?r("div",{class:"table-search-container right"},[r("select",{class:"table-search-select",attrs:{name:"tableFilter"},domProps:{value:t.filter},on:{change:o}},[e.map((function(e){return r("option",{domProps:{value:e}},[e])}))]),r("input",{class:"table-search-input",attrs:{type:"text"},domProps:{value:t.searchValue},on:{keydown:a}})]):""])}(s.filters,j,P),t=function(e,t,n,a){return r("thead",{directives:[{name:"show",value:e.showHeader}]},[r("tr",[e.columns.map((function(e){var o=t[e.name];return o?r("th",[o({column:e})]):r(b,{attrs:{title:e.title,name:e.name,canSort:e.canSort,sortState:n},on:{click:a}})})),t.operator?r("th",["操作"]):""])])}(s,u,m,g),n=function(e,t,n,a){return r("tbody",{style:n.value},[t.value.map((function(t){return r("tr",[a.columns.map((function(e){var n=(e.renderFn?e.renderFn(t[e.name]):t[e.name])||"-";return r("td",{attrs:{"column-data-name":e.name,title:n}},[n])})),r("td",{class:"table-body-operator center"},[e.operator?e.operator({item:t}):""])])}))])}(u,V,d,s),a=C?function(e,t,n,a,o){return r("div",[r("button",{class:"pagination-btn",on:{click:a}},["<"]),new Array(t.value).fill(1).map((function(t,a){return r("button",{class:["pagination-btn",{"page-on":e.pageIndex===a+1}],on:{click:n.bind(null,a+1)}},[a+1])})),r("button",{class:"pagination-btn",on:{click:o}},[">"])])}(C,k,z,A,T):"";return r("div",{class:"simple-table"},[e,r("table",[t,n,r("div",{class:"pagination center"},[a])])])}}});var C=new Array(499).fill(1).map((function(e,t){return{name:"Jerry".concat(t),age:Math.min(100,t+1),sex:t%2==0?0:1}}));C.push({name:"",age:15,sex:0});var I=[{name:"name",title:"姓名",canSort:!0},{name:"age",title:"年龄",canSort:!0},{name:"sex",title:"性别",renderFn:function(e){return e?"男":"女"}}],k=u(C.slice(0,50)),z=t({name:"App",components:{TestTable:_},setup:function(){var e=s(k),t=s(I);return{tableData:e,tableColumns:t,tableFilters:["name","age","sex"],tablePagination:{pageSize:10,pageIndex:1},deleteItem:function(t){var n=e.value.findIndex((function(e){return e.name===t.name}));e.value.splice(n,1)},addItem:function(){alert("add")}}}}),A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table_demo"},[n("TestTable",{attrs:{data:e.tableData,columns:e.tableColumns,pagination:e.tablePagination,filters:e.tableFilters},scopedSlots:e._u([{key:"operator",fn:function(t){var r=t.item;return[n("a",{staticClass:"mr-1",attrs:{href:"javascript:void(0)"},on:{click:e.addItem}},[e._v("新增")]),n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.deleteItem(r)}}},[e._v("删除")])]}}])})],1)};function T(e,t,n,r,a,o,i,l){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):a&&(c=l?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var s=u.render;u.render=function(e,t){return c.call(t),s(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}var E={},F=T(z,A,[],!1,H,"4aa9decf",null,null);function H(e){for(var t in E)this[t]=E[t]}var j=function(){return F.exports}();d.use(f),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{el:"#app",routeBase:"",base:""},t=e.el,n=p({render:function(){return r(j)}});n.mount(t)}()}}}))}();
