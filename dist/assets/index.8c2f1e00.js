export function __vite_legacy_guard(){import("data:text/javascript,")}import{d as e,c as t,a as n,b as a,r,w as o,s as i,i as s,e as l,f as c,V as u,C as d,g as p}from"./vendor.b771de2f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m={data:{type:Array,required:!0},columns:{type:Array,required:!0},showHeader:{type:Boolean,default:!0},pagination:{type:Object,default:()=>{}},maxHeight:{type:Number||String,default:-1},filters:{type:Array,default:()=>[]}};var f=e({name:"TableColumn",props:{name:{type:String,required:!0},title:{type:String,default:""},canSort:{type:Boolean,default:!1},renderFn:{type:Function||void 0,default:void 0},sortState:{type:Object,default:()=>({name:"",direction:0})}},setup(e,{emit:t}){const a=e.title,r=e.name,o=e.canSort,i=g(e.sortState,r),s=()=>{t("click",r)};return()=>n("th",{attrs:{"column-name":r}},[a,o?n("span",{class:i.value,on:{click:s}}):""])}});const g=(e,n)=>t((()=>({"column-sort":!0,des:e.name===n&&!e.direction,asc:e.name===n&&e.direction}))),h=a("table:sort"),v=a("table:filter"),b=a("table:pagination");const y=a("table:body"),x=a("table:error");var S=e({name:"Table",props:m,setup(e,{slots:a}){!function(e){var t,n;const a=null==(t=null==e?void 0:e.columns)?void 0:t.map((e=>e.name));if(a.length!==new Set(a).size){const e="Column name can not the same";throw x(e),Error(e)}if(s(a,e.filters).length!==(null==(n=e.filters)?void 0:n.length)){const e="filters must be a column name";throw x(e),Error(e)}}(e);const l=r({data:e.data,columns:e.columns,filters:e.filters,showHeader:e.showHeader}),c=function(e){return t((()=>({maxHeight:"string"==typeof e.maxHeight?e.maxHeight:e.maxHeight+"px"})))}(e),[u,{handleSort:d}]=(()=>{const e=r({name:"",direction:1});return[e,{handleSort:t=>{e.name!==t?(e.name=t,e.direction=1):e.name==t&&0===e.direction?e.name="":e.direction=Number(!e.direction),h("sort by",t,e.direction?" 升序":" 降序")}}]})(),[p,{pageBtnSize:m,changePage:g,goBefore:S,goNext:_,setPageCount:C}]=((e,n)=>{const a=e?r({pageIndex:e.pageIndex,pageSize:e.pageSize,count:n}):void 0,i=t((()=>a?Math.ceil(a.count/a.pageSize):0));return o(i,(()=>{a.pageIndex=Math.min(i.value,a.pageIndex)})),[a,{pageBtnSize:i,changePage:e=>{a.pageIndex=e,b("change page to",e)},goBefore:()=>{const e=a.pageIndex-1;a.pageIndex=e<=0?1:e,b("go before")},goNext:()=>{const e=a.pageIndex+1;a.pageIndex=e>i.value?i.value:e,b("go next")},setPageCount:e=>{a.count=e}}]})(e.pagination,l.data.length),I=t((()=>{var t;return(null==(t=e.filters)?void 0:t.length)?e.filters[0]:""})),[w,{search:k}]=(e=>{const t=r({filter:e,searchValue:""});return[t,{search:(e,n)=>{t.filter=e,t.searchValue=n,v(`filter data, filter is ${t.filter} searchValue is ${t.searchValue}`)}}]})(I.value),F=((e,n,a,r,o)=>t((()=>{let t=e.data||[];const{filter:s,searchValue:l}=a;if(s&&l){const n=e.columns.filter((e=>e.name===s))[0].renderFn;t=t.filter((e=>(n?n(e[s]):e[s]).toString().toLocaleLowerCase().includes(l.toLocaleLowerCase())))}if(!t||!r)return t;o(t.length);const c=(r.pageIndex-1)*r.pageSize,u=c+r.pageSize;return n.name?n.direction?i(t,(e=>e[n.name])).slice(c,u):i(t,(e=>e[n.name])).reverse().slice(c,u):t.slice(c,u)})))(l,u,w,p,C);return o(F,(()=>{y("data change")})),()=>{const e=function(e,t,a){const r=e=>{const n=e.target;"Enter"===e.code&&a(t.filter,n.value)},o=e=>{const t=e.target;a(t.value,"")};return n("header",[e.length?n("div",{class:"table-search-container right"},[n("select",{class:"table-search-select",attrs:{name:"tableFilter"},domProps:{value:t.filter},on:{change:o}},[e.map((e=>n("option",{domProps:{value:e}},[e])))]),n("input",{class:"table-search-input",attrs:{type:"text"},domProps:{value:t.searchValue},on:{keydown:r}})]):""])}(l.filters,w,k),t=function(e,t,a,r){return n("thead",{directives:[{name:"show",value:e.showHeader}]},[n("tr",[e.columns.map((e=>{const o=t[e.name];return o?n("th",[o({column:e})]):n(f,{attrs:{title:e.title,name:e.name,canSort:e.canSort,sortState:a},on:{click:r}})})),t.operator?n("th",["操作"]):""])])}(l,a,u,d),r=function(e,t,a,r){return n("tbody",{style:a.value},[t.value.map((t=>n("tr",[r.columns.map((e=>{const a=(e.renderFn?e.renderFn(t[e.name]):t[e.name])||"-";return n("td",{attrs:{"column-data-name":e.name,title:a}},[a])})),n("td",{class:"table-body-operator center"},[e.operator?e.operator({item:t}):""])])))])}(a,F,c,l),o=p?function(e,t,a,r,o){return n("div",[n("button",{class:"pagination-btn",on:{click:r}},["<"]),new Array(t.value).fill(1).map(((t,r)=>n("button",{class:["pagination-btn",{"page-on":e.pageIndex===r+1}],on:{click:a.bind(null,r+1)}},[r+1]))),n("button",{class:"pagination-btn",on:{click:o}},[">"])])}(p,m,g,S,_):"";return n("div",{class:"simple-table"},[e,n("table",[t,r,n("div",{class:"pagination center"},[o])])])}}});const _=new Array(499).fill(1).map(((e,t)=>({name:`Jerry${t}`,age:Math.min(100,t+1),sex:t%2==0?0:1})));_.push({name:"",age:15,sex:0});const C=[{name:"name",title:"姓名",canSort:!0},{name:"age",title:"年龄",canSort:!0},{name:"sex",title:"性别",renderFn:e=>e?"男":"女"}],I=l(_.slice(0,50));var w=e({name:"App",components:{TestTable:S},setup(){const e=c(I),t=c(C);return{tableData:e,tableColumns:t,tableFilters:["name","age","sex"],tablePagination:{pageSize:10,pageIndex:1},deleteItem:t=>{const n=e.value.findIndex((e=>e.name===t.name));e.value.splice(n,1)},addItem:()=>{alert("add")}}}});function k(e,t,n,a,r,o,i,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}const F={};var P=k(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table_demo"},[n("TestTable",{attrs:{data:e.tableData,columns:e.tableColumns,pagination:e.tablePagination,filters:e.tableFilters},scopedSlots:e._u([{key:"operator",fn:function(t){var a=t.item;return[n("a",{staticClass:"mr-1",attrs:{href:"javascript:void(0)"},on:{click:e.addItem}},[e._v("新增")]),n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.deleteItem(a)}}},[e._v("删除")])]}}])})],1)}),[],!1,T,"4aa9decf",null,null);function T(e){for(let t in F)this[t]=F[t]}var $=function(){return P.exports}();u.use(d),function(e={el:"#app",routeBase:"",base:""}){const{el:t}=e;p({render:()=>n($)}).mount(t)}();
